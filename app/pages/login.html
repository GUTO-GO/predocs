<!DOCTYPE html>
<html lang="pt-br">

<head>
    <title>Login</title>
</head>

<body>
    <section id="app">
        <center class="row mt-5">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h1><b>Bem vindo</b></h1>
                    </div>
                    <div class="card-body">
                        <form action="/deslogado/login" method="POST" id="login">
                            <div class="mb-3">
                                <label for="email" class="form-label">Email</label>
                                <input name="email" type="email" class="form-control" id="email"
                                    aria-describedby="emailHelp" autocomplete="off" required />
                                <div id="emailHelp" class="form-text">Insira seu email de acesso da plataforma</div>
                            </div>
                            <div class="mb-3">
                                <label for="senha" class="form-label">Senha</label>
                                <input name="senha" type="password" class="form-control" id="senha"
                                    autocomplete="current-password" required />
                            </div>
                            <div class="row">
                                <div class="col-5">
                                    <button class="btn" tipo="confirma">Entrar</button>
                                </div>
                                <div class="col-7">
                                    <p id="msg-retorno-erro" tipo="erro">Login ou senha incorretos!</p>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </center>
    </section>

    <script id="coreJs" src="../core/predocs.js"></script>
    <script type="text/javascript">
        let app = {
            componentesBloqueados: [],
            scripts: [],
            scriptsBloqueados: [],
            styles: [
                "/css/pages/index.css",
                "/css/pages/deslogado/login.css"
            ],
            stylesBloqueados: [],
        };

        let docs = new Predocs(app);

        let before = () => { };
        let after = () => {
            docs.form("#login",
                () => {
                    docs.carregando.show();
                },
                (resp) => {
                    docs.carregando.hide();
                    if (resp.status) {
                        window.location.href = "principal.html";
                    } else {
                        $("#msg-retorno-erro").show();
                    }
                }
            );
        };

        docs.init(before, after);
    </script>
</body>

</html>